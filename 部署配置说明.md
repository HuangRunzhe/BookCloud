# 🚀 服务器部署配置说明

## 📋 服务器信息

- **前端域名**: bc.aikits.sbs
- **后端域名**: bcbk.aikits.sbs
- **协议**: HTTPS
- **后端API**: https://bcbk.aikits.sbs

## ✅ 已完成的配置更新

### 1. 前端API配置 (`lib/api.ts`)
- 添加了前端域名检测 (bc.aikits.sbs)
- 自动指向后端API (bcbk.aikits.sbs)
- 自动切换到HTTPS协议
- 保持本地开发环境兼容

### 2. Next.js配置 (`next.config.js`)
- 更新图片域名配置 (支持前端和后端域名)
- 更新API重写规则 (指向后端API)
- 添加HTTPS支持

### 3. SEO配置
- **layout.tsx**: 更新元数据基础URL (bc.aikits.sbs)
- **sitemap.xml**: 更新所有页面URL (bc.aikits.sbs)
- **robots.txt**: 更新站点地图URL (bc.aikits.sbs)
- **landing页面**: 更新结构化数据URL (bc.aikits.sbs)

## 🔧 后端服务器配置

### CORS配置
确保后端服务器允许以下域名访问：
```python
app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "http://localhost:3000",
        "http://192.168.5.15:3000", 
        "http://127.0.0.1:3000",
        "https://bc.aikits.sbs",      # 前端域名
        "https://www.bc.aikits.sbs",  # 前端www子域名
        "https://bcbk.aikits.sbs",    # 后端域名
        "https://www.bcbk.aikits.sbs" # 后端www子域名
    ],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### 静态文件服务
确保uploads目录可以正常访问：
```python
app.mount("/uploads", StaticFiles(directory=UPLOAD_DIR), name="uploads")
```

## 🌐 域名访问测试

### 1. 前端访问
- 主站: https://bc.aikits.sbs
- 介绍页: https://bc.aikits.sbs/landing
- 登录页: https://bc.aikits.sbs/login
- 注册页: https://bc.aikits.sbs/register

### 2. 后端API测试
- API文档: https://bcbk.aikits.sbs/docs
- 健康检查: https://bcbk.aikits.sbs/
- 图片访问: https://bcbk.aikits.sbs/uploads/xxx.jpg

## 📱 移动端访问

现在用户可以通过以下方式访问：
- 电脑: https://bc.aikits.sbs
- 手机: https://bc.aikits.sbs
- 平板: https://bc.aikits.sbs

## 🔍 SEO优化

### 搜索引擎提交
1. **Google Search Console**: 提交 https://bc.aikits.sbs/sitemap.xml
2. **百度站长工具**: 提交站点地图
3. **Bing Webmaster**: 提交站点地图

### 验证配置
- 检查所有页面是否正常加载
- 验证图片是否正常显示
- 测试API接口是否正常响应

## 🚨 注意事项

1. **HTTPS证书**: 确保服务器配置了有效的SSL证书
2. **防火墙**: 确保80和443端口开放
3. **域名解析**: 确保域名正确解析到服务器IP
4. **备份**: 定期备份数据库和上传文件

## 🎯 下一步

1. 部署前端到服务器或CDN
2. 配置域名DNS解析
3. 测试所有功能是否正常
4. 提交搜索引擎收录

---

**现在您的书云系统已经配置为：**
- **前端域名**: bc.aikits.sbs
- **后端API**: bcbk.aikits.sbs
